# 📖 充电记账 - 用户使用手册

## 目录
- [快速开始](#快速开始)
- [首页功能](#首页功能)
- [手动输入](#手动输入)
- [统计分析](#统计分析)
- [历史记录](#历史记录)
- [设置管理](#设置管理)
- [常见问题](#常见问题)
- [使用技巧](#使用技巧)

---

## 快速开始

### 首次使用

1. **安装应用**
   - 从App Store下载"充电记账"
   - 打开应用，无需注册登录

2. **创建第一条记录**
   - 方式一：点击"📸 上传截图"，选择充电订单截图
   - 方式二：点击"✏️ 手动输入"，填写充电信息

3. **设置充电站点**
   - 进入"设置" → "充电站管理"
   - 添加常用充电站点

---

## 首页功能

### 本月概览卡片

显示本月关键数据：
- **本月支出**：¥XXX
- **充电次数**：XX 次
- **充电度数**：XX.X 度

### 快速操作

**📸 上传截图**
1. 点击"上传截图"按钮
2. 从相册选择充电订单截图
3. 等待OCR识别（显示加载动画）
4. 系统自动填充识别的信息
5. 确认无误后点击"完成"

**✏️ 手动输入**
1. 点击"手动输入"按钮
2. 进入详细输入界面
3. 填写所有必要信息
4. 点击"完成"保存

### 今日记录

- 显示今天的所有充电记录
- 点击记录查看详情
- 左滑可编辑或删除

---

## 手动输入

### 界面布局

#### 顶部金额显示
- **充电模式**：显示"实付金额"（蓝色）
- **充值模式**：显示"充值金额"（紫色）
- 自动计算公式：电费 + 服务费 - 优惠 = 实付

#### 记录类型选择
- **充电**：日常充电记录
- **充值**：电卡充值记录（如极能电卡、特斯拉充值等）

### 充电模式

#### 基本信息
1. **充电站**
   - 点击选择已添加的充电站
   - 建议提前在"设置"中添加常用站点

2. **充电时间**
   - 默认当前时间
   - 点击可修改

3. **充电电量**
   - 输入充电度数（kWh）
   - 示例：29.8

#### 费用明细
1. **电费**
   - 纯电费金额
   - 示例：¥19.12

2. **服务费**
   - 充电服务费
   - 示例：¥10.73

3. **优惠金额**
   - 包含优惠券、积分抵扣等
   - 会自动从实付金额中扣除
   - 显示为绿色

4. **停车费**（可选）
   - 充电时的停车费用

5. **实付金额**
   - 自动计算：电费 + 服务费 - 优惠
   - 显示为蓝色底纹

#### 其他信息
1. **积分**
   - 使用的积分数量
   - 示例：232（极分）
   - 显示为橙色

2. **极能抵扣**（只读）
   - OCR自动识别的极能度数
   - 显示为紫色
   - 格式：XX.XXX kWh 或"未识别"

3. **备注**
   - 其他说明信息
   - 点击输入框弹出系统键盘

### 充值模式

充值模式界面更简洁，适合记录电卡充值：

#### 基本信息
1. **充值平台**
   - 充值的平台名称
   - 示例：小鹏充电、特斯拉

2. **购买时间**
   - 充值时间

3. **获得度数**
   - 充值获得的电量
   - 示例：300度
   - 显示为紫色

#### 充值金额
1. **充值金额**
   - 支付的金额
   - 示例：¥309
   - 显示为紫色

2. **等价信息**
   - 自动显示：309元 = 300度
   - 自动计算单价：约¥1.03/度

### 输入技巧

1. **数字输入替换**
   - 点击数字字段后，输入新数字会替换原值
   - 不会追加到原值后面

2. **未输入提示**
   - 空字段显示"未输入"（灰色斜体）
   - 不再显示"¥0.00"

3. **键盘提示**
   - 数字键盘上方显示"正在编辑：字段名"
   - 显示当前字段的值

4. **语义配色**
   - 优惠金额：绿色（节省的钱）
   - 积分：橙色
   - 实付金额：蓝色
   - 极能抵扣：紫色

---

## 统计分析

### 时间范围切换

顶部可切换三种时间范围：
- **周**：本周周一到今天
- **月**：本月1号到今天
- **年**：今年1月到今天

### 核心指标（3个主卡片）

1. **支出**
   - 时间范围内的总支出
   - 包含所有充电费用

2. **充电度数**
   - 时间范围内的总充电量
   - 单位：度（kWh）

3. **电卡余额**
   - **全局统计**（不受时间范围限制）
   - 计算方式：充值总度数 - 使用总度数
   - 示例：充值600度 - 使用510.8度 = 余额89.2度

### 统计栏

整合次要数据，一行显示：
- **次数**：充电次数
- **积分**：积分支出总计
- **平均**：平均每度电费用（¥/度）

### 趋势图

#### 支出趋势
- **周**：周一到周日，每天一个数据点
- **月**：最近4周，每周一个数据点
- **年**：1月到12月，每月一个数据点
- X轴始终按自然顺序排列

#### 充电度数趋势
- 显示规则同支出趋势
- 橙色配色方案
- Y轴单位：kWh

### 地点分布

按充电站点统计：
- 显示总消费金额
- 显示充电次数
- 可视化进度条
- 按金额降序排列

---

## 历史记录

### 月份选择

- 顶部显示当前月份
- 左右箭头切换月份
- 格式：2025年10月

### 月度统计卡片

显示选中月份的统计数据：
- **总支出**：¥XXX
- **充电次数**：XX次
- **平均度数**：XX.X度

### 时间轴记录

#### 日期分组
- 按日期分组显示
- 格式：10月28日 周一
- 显示当日总金额

#### 记录卡片

**充电记录**
- 图标：⚡ 闪电
- 显示：充电站、时间、度数
- 金额：¥XX.XX
- 第二行：服务费或"无服务费"

**充值记录**
- 图标：💳 信用卡
- 绿色"充值"标签
- 金额：+¥XX.XX（绿色）
- 第二行：约¥X.XX/度

#### 左滑操作

向左滑动记录卡片：
- 蓝色"编辑"按钮：修改记录
- 红色"删除"按钮：删除记录（需确认）
- 点击其他地方可复位

---

## 设置管理

### 外观设置

跟随系统设置，自动切换浅色/深色模式

### 语言设置

- 中文
- English
- 更改后重启应用生效

### 货币设置

选择货币单位：
- 人民币 (¥)
- 美元 ($)
- 欧元 (€)

### 充电站管理

#### 添加充电站
1. 点击"充电站管理"
2. 点击右上角"+"按钮
3. 输入名称
4. 选择图标（14种可选）
5. 选择颜色（10种可选）
6. 点击"保存"

#### 编辑充电站
1. 左滑充电站项
2. 点击"编辑"
3. 修改信息
4. 点击"保存"

#### 删除充电站
1. 左滑充电站项
2. 点击"删除"
3. 确认删除

#### 排序充电站
1. 点击"编辑"进入编辑模式
2. 长按拖动站点调整顺序
3. 点击"完成"保存

**注意**：
- 手动输入界面会按此顺序显示
- 排序靠前的站点更容易选择

### 数据管理

#### 导出CSV数据

1. 点击"导出CSV数据"
2. 等待生成文件
3. 选择分享方式（隔空投送、微信、邮件等）
4. 文件名格式：`充电记录_20251028_143025.csv`

**CSV字段说明**：
```
日期,充电地点,记录类型,充电度数(kWh),电费金额,服务费,总金额,停车费,优惠金额,积分,极能度数(kWh),备注
```

**用途**：
- Excel分析
- 数据备份
- 报销凭证

#### 备份到iCloud

1. 点击"备份到iCloud"
2. 等待备份完成
3. 选择保存位置（iCloud Drive、本地等）
4. 文件名格式：`充电记账_20251028_143025.json`

**备份内容**：
- 所有充电记录
- 所有充电站点设置
- 用户偏好设置（货币、语言）

#### 从iCloud恢复

1. 点击"从iCloud恢复"
2. 选择之前的备份文件（.json）
3. 等待恢复完成
4. 数据自动合并（不会删除现有数据）

**注意**：
- 恢复会合并数据，不会覆盖
- 相同名称的充电站不会重复创建
- 建议恢复前先备份当前数据

### 应用信息

显示：
- 应用版本号
- 开发者信息
- 隐私政策
- 使用条款

### 危险操作

#### 删除所有数据

⚠️ **此操作不可恢复！**

1. 点击"删除所有数据"
2. 弹出二次确认提示
3. 再次确认后删除

**删除内容**：
- 所有充电记录
- 所有充电站点
- 不删除用户设置（货币、语言保留）

**建议**：删除前先备份到iCloud

---

## 常见问题

### Q1: OCR识别不准确怎么办？

**A**: 
1. 确保截图清晰完整
2. 包含关键信息（金额、充电站名称等）
3. 识别后在手动输入界面修正
4. 不同平台的截图格式不同，系统会自动选择算法

### Q2: 电卡余额计算不对？

**A**:
1. 检查充值记录的"记录类型"是否为"充值"
2. 检查"获得度数"是否正确填写
3. 检查充电记录中的"极能抵扣"是否被识别
4. 余额 = 所有充值的获得度数 - 所有充电的极能抵扣

### Q3: 如何区分充电和充值？

**A**:
- **充电**：实际充电产生的费用记录
  - 有电费、服务费
  - 可能有优惠、积分、极能抵扣
  
- **充值**：购买电卡的记录
  - 只有充值金额和获得度数
  - 示例：309元买300度极能

### Q4: 为什么统计页面的电卡余额不受时间范围影响？

**A**:
电卡余额是全局的，反映当前的实际余额，不应该受时间范围限制。
- 支出、充电度数等受时间范围影响
- 电卡余额始终显示全局总余额

### Q5: 数据会丢失吗？

**A**:
数据存储在设备本地，使用SwiftData持久化：
- 除非卸载应用，否则数据不会丢失
- 建议定期备份到iCloud
- 可导出CSV作为二次备份

### Q6: 能否导入其他应用的数据？

**A**:
目前只支持从本应用的备份文件恢复。
如需导入其他数据：
1. 准备CSV文件（需符合格式）
2. 联系开发者获取导入工具

### Q7: 趋势图为什么有些点是0？

**A**:
- 某天/周/月没有充电记录时，数据点为0
- 这是正常现象，反映实际充电频率
- 切换到"月"或"年"视图可以看到更平滑的趋势

### Q8: 如何删除某个充电站？

**A**:
如果该充电站已有记录，无法删除：
- 系统会保留有记录的充电站
- 可以编辑修改名称
- 建议保留，方便统计分析

### Q9: 换手机了数据怎么办？

**A**:
1. 旧手机：设置 → 备份到iCloud → 保存文件
2. 将备份文件发送到新手机（隔空投送/iCloud Drive）
3. 新手机：安装应用 → 设置 → 从iCloud恢复 → 选择文件

### Q10: 能否设置充电提醒？

**A**:
当前版本暂不支持，计划在v1.1版本中加入：
- 充电完成提醒
- 定期记账提醒
- 电卡余额不足提醒

---

## 使用技巧

### 技巧1: 快速记账流程

**最快方式**（适合订单截图清晰的情况）：
1. 充电完成 → 截图订单
2. 打开App → 上传截图
3. OCR自动识别 → 确认 → 完成
4. 总耗时：< 30秒

### 技巧2: 电卡管理最佳实践

1. **购买电卡时**
   - 选择"充值"类型
   - 准确填写充值金额和获得度数
   - 示例：309元 = 300度

2. **使用电卡充电时**
   - 选择"充电"类型
   - 上传截图让OCR自动识别极能抵扣
   - 或手动填写极能抵扣度数

3. **查看余额**
   - 统计页面"电卡余额"卡片
   - 实时显示可用余额

### 技巧3: 充电站点预设

**提前设置常用站点**：
1. 首次使用时，添加3-5个常用充电站
2. 按使用频率排序（拖拽调整）
3. 记账时可快速选择，无需每次输入

### 技巧4: 月度分析

每月1号：
1. 查看上月统计数据
2. 导出CSV进行详细分析
3. 对比不同充电站的价格
4. 优化充电策略（选择性价比高的站点）

### 技巧5: 数据备份策略

建议备份频率：
- **轻度用户**（每月充电<5次）：每月备份一次
- **中度用户**（每月充电5-15次）：每两周备份一次
- **重度用户**（每月充电>15次）：每周备份一次

备份方式：
1. iCloud备份（完整数据，可恢复）
2. CSV导出（数据分析，备份凭证）
3. 两者结合，双重保险

### 技巧6: 优惠最大化

利用统计功能找出最优惠的充电站：
1. 统计 → 地点分布
2. 查看各站点的平均电费
3. 结合充电次数和总费用分析
4. 选择性价比最高的站点

### 技巧7: 截图识别最佳实践

**提高识别准确率**：
1. 截图时确保订单信息完整
2. 包含：金额、充电站、时间、度数
3. 截图清晰，避免模糊
4. 支持的平台：小鹏、特斯拉、国家电网等

**识别后检查**：
- 充电站名称是否正确
- 金额是否准确（电费、服务费、实付）
- 时间是否正确
- 优惠信息是否完整

### 技巧8: 深色模式使用

**优势**：
- 夜间使用更护眼
- 省电（OLED屏幕）
- 界面依然清晰美观

**切换方式**：
- 跟随系统设置自动切换
- 设置 → 显示与亮度 → 深色

### 技巧9: 快速查找记录

1. **历史页面**
   - 切换月份快速定位
   - 按日期分组，清晰展示

2. **搜索技巧**（未来版本）
   - 按充电站搜索
   - 按金额范围筛选
   - 按时间段筛选

### 技巧10: 分享技巧

**导出数据分享**：
1. CSV → 发送给财务报销
2. iCloud备份 → 分享给家人（共同管理）
3. 截图统计页面 → 分享朋友圈

---

## 版本更新

### v1.0.0（当前版本）
- ✅ 基础记账功能
- ✅ OCR智能识别
- ✅ 统计分析
- ✅ 电卡管理
- ✅ 数据导入导出
- ✅ 深色模式支持

### v1.1（计划中）
- 🔜 推送通知
- 🔜 Widget小组件
- 🔜 搜索和筛选
- 🔜 更多图表

---

## 联系支持

如需帮助或反馈问题：
- 📧 Email: jimmy.zhou@outlook.com
- 💬 GitHub仓库: https://github.com/zhouao2/ChargerNote
- 🐛 问题反馈: https://github.com/zhouao2/ChargerNote/issues

---

**感谢使用充电记账！**

*让充电费用管理更简单，让出行更省心 ⚡*

